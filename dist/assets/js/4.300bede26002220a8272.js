webpackJsonp([4],{"5uiz":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aA9S"),n=a.n(i),o=a("CtzY"),l=a.n(o),s={name:"index",data:function(){return{nature:"",dataValueStart:"",dataValueEnd:"",startTime:"",endTime:"",lineEve:"",tiaojian:{secondFrom:"",secondTo:"",telephoneFrom:"",telephoneTo:"",callTimeFrom:"",callTimeTo:"",kw:""}}},activated:function(){n()(this.$data,this.$options.data()),$("#index .nature").val(""),$("#index .lineEve").val(""),this.lastPage(1),this.lastPageNo(1);var t=this;$("#index .nature").change(function(){t.nature=$(this).val(),t.lastPageNo(),$("#index #box").paging({initPageNo:1,totalPages:t.totalNum,slideSpeed:600,jump:!0,callback:function(e){t.pn=e,t.lastPage(e)}})}),$("#index .lineEve").change(function(){t.lineEve=$(this).val(),t.lastPageNo(t.nature),$("#index #box").paging({initPageNo:1,totalPages:t.totalNum,slideSpeed:600,jump:!0,callback:function(e){t.pn=e,t.lastPage(e)}})}),$.ajax({url:"/crm/login-refresh",type:"POST",async:!0,success:function(e){0==e.code?(localStorage.setItem("nickname",e.data.nickname),$("#index .peoname").html(e.data.nickname),$("#index #userName").val(e.data.nickname),t.$store.state.loginRefresh=e.data):setTimeout(function(){t.$router.push({path:"/login"})},1e3)}})},methods:{exitFn:function(){$.ajax({type:"post",url:"/crm/logout",data:"",success:function(t){location.href=location.pathname}})},restart:function(){this.tiaojian.secondFrom="",this.tiaojian.secondTo="",this.tiaojian.telephoneFrom="",this.tiaojian.telephoneTo="",this.tiaojian.callTimeFrom="",this.tiaojian.callTimeTo="",this.tiaojian.kw="",this.screeningFn()},screeningFn:function(){console.log("s"),this.lastPageNo()},elmentDataStartFn:function(t){!this.tiaojian.callTimeTo||this.moment(t).valueOf()<this.tiaojian.callTimeTo?(this.tiaojian.callTimeFrom=t?this.moment(t).valueOf():"",this.lastPageNo()):this.$message({type:"info",message:"开始时间需小于结束时间!"})},elmentDataEndFn:function(t){!this.tiaojian.callTimeFrom||this.moment(t).valueOf()>this.tiaojian.callTimeFrom?(console.log(this.moment(this.moment(t).valueOf()).format("YYYY-MM-DD HH-mm-ss")),this.tiaojian.callTimeTo=t?this.moment(t).valueOf():"",this.lastPageNo()):this.$message({type:"info",message:"结束时间需大于开始时间!"})},lastPage:function(t){var e="&"+l.a.stringify({userId:localStorage.getItem("id")||"",secondFrom:this.tiaojian.secondFrom,secondTo:this.tiaojian.secondTo,telephoneFrom:this.tiaojian.telephoneFrom,telephoneTo:this.tiaojian.telephoneTo,callTimeFrom:this.tiaojian.callTimeFrom,callTimeTo:this.tiaojian.callTimeTo,kw:this.tiaojian.kw}),a=this;$.ajax({url:"/crm/statistician/phone-record/records",type:"GET",data:"ps=15&pn="+t+e,async:!0,success:function(e){if(console.dir(e),0==e.code&&($("#index .tbody").html(""),$(".tableBox").css("display","block"),e.data.records&&e.data.records.length>0))for(var i in console.log(12321312),e.data.records){var n="";n=e.data.records[i].callTime?a.moment(e.data.records[i].callTime).format("YYYY-MM-DD HH:mm:ss"):"",$("#index .tbody").append("<tr id="+e.data.records[i].userId+"><td>"+(parseInt(i)+1+15*(t-1))+'</td><td class="xiugaiTimeFn">'+e.data.records[i].userNickname+"</td><td>"+e.data.records[i].telephoneFrom+"</td><td>"+e.data.records[i].telephoneTo+"</td><td>"+n+"</td><td>"+(e.data.records[i].second||"0")+'s</td><td class="enterHos"><a href="'+e.data.records[i].url+'"  target=＂_blank＂>录音地址</a></td></tr>')}}})},lastPageNo:function(){var t=l.a.stringify({userId:localStorage.getItem("id")||"",secondFrom:this.tiaojian.secondFrom,secondTo:this.tiaojian.secondTo,telephoneFrom:this.tiaojian.telephoneFrom,telephoneTo:this.tiaojian.telephoneTo,callTimeFrom:this.tiaojian.callTimeFrom,callTimeTo:this.tiaojian.callTimeTo,kw:this.tiaojian.kw}),e=this;$.ajax({url:"/crm/statistician/phone-record/records-sum",type:"GET",data:t,async:!0,success:function(t){0==t.code&&(e.totalNum=Math.ceil(t.data.count/15),console.log(e.totalNum),$("#index .numberAll").html("( 共"+(t.data.count||"0")+"条数据 )"),$("#index #box").paging({initPageNo:1,totalPages:e.totalNum,slideSpeed:600,jump:!0,callback:function(t){e.pn=t,e.lastPage(t)}}))}})},getDateDiff:function(t){if(!t)return"";var e=(new Date).getTime()-t;if(!(e<0)){var a=e/2592e6,i=e/6048e5,n=e/864e5,o=e/36e5,l=e/6e4;return a>=1?a<=12?parseInt(a)+"月前":parseInt(a/12)+"年前":i>=1?parseInt(i)+"周前":n>=1?parseInt(n)+"天前":o>=1?parseInt(o)+"小时前":l>=1?parseInt(l)+"分钟前":"刚刚"}}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"recore-list"}},[a("div",{staticStyle:{padding:"0px 20px",height:"auto"}},[a("h2",{staticStyle:{display:"inline-block",margin:"0","line-height":"70px","font-size":"30px"}},[t._v(t._s(t.$store.state.loginRefresh.nickname))]),t._v(" "),a("a",{staticClass:"loginout",staticStyle:{float:"right","line-height":"70px","margin-left":"20px",cursor:"pointer"},on:{click:t.exitFn}},[t._v("退出登录")])]),t._v(" "),a("div",{attrs:{id:"index"}},[t.$route.query.nickname?a("div",{staticStyle:{width:"100%",height:"auto",padding:"0px 20px"}},[a("h1",{staticStyle:{"font-size":"24px","font-family":"PingFangSC-Regular, PingFang SC","font-weight":"400",color:"rgba(0, 0, 0, 0.85)","line-height":"60px"}},[t._v("昵称："+t._s(t.$route.query.nickname))])]):t._e(),t._v(" "),a("div",{staticClass:"selectOption",staticStyle:{width:"100%",height:"auto",padding:"0px 20px"}},[a("span",[t._v("筛选条件：")]),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"150px"},attrs:{placeholder:"关键字"},on:{change:function(e){return t.screeningFn()}},model:{value:t.tiaojian.kw,callback:function(e){t.$set(t.tiaojian,"kw",e)},expression:"tiaojian.kw"}}),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"150px"},attrs:{placeholder:"通话时长From"},on:{change:function(e){return t.screeningFn()}},model:{value:t.tiaojian.secondFrom,callback:function(e){t.$set(t.tiaojian,"secondFrom",e)},expression:"tiaojian.secondFrom"}}),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"150px"},attrs:{placeholder:"通话时长To"},on:{change:function(e){return t.screeningFn()}},model:{value:t.tiaojian.secondTo,callback:function(e){t.$set(t.tiaojian,"secondTo",e)},expression:"tiaojian.secondTo"}}),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"150px"},attrs:{placeholder:"主叫号码"},on:{change:function(e){return t.screeningFn()}},model:{value:t.tiaojian.telephoneFrom,callback:function(e){t.$set(t.tiaojian,"telephoneFrom",e)},expression:"tiaojian.telephoneFrom"}}),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"150px"},attrs:{placeholder:"被叫号码"},on:{change:function(e){return t.screeningFn()}},model:{value:t.tiaojian.telephoneTo,callback:function(e){t.$set(t.tiaojian,"telephoneTo",e)},expression:"tiaojian.telephoneTo"}}),t._v(" "),a("el-date-picker",{attrs:{"default-time":"00:00:00",type:"datetime",placeholder:"请选择通话时间from",align:"right"},on:{change:t.elmentDataStartFn},model:{value:t.tiaojian.callTimeFrom,callback:function(e){t.$set(t.tiaojian,"callTimeFrom",e)},expression:"tiaojian.callTimeFrom"}}),t._v(" "),a("el-date-picker",{attrs:{"default-time":"23:59:59",type:"datetime",placeholder:"选择结束通话时间To",align:"right"},on:{change:t.elmentDataEndFn},model:{value:t.tiaojian.callTimeTo,callback:function(e){t.$set(t.tiaojian,"callTimeTo",e)},expression:"tiaojian.callTimeTo"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.restart()}}},[t._v("重置")])],1),t._v(" "),a("p",{staticClass:"numberAll"}),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tableBox",staticStyle:{display:"none","padding-bottom":"50px"}},[a("table",[a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("所属人姓名")]),t._v(" "),a("th",[t._v("主叫号码")]),t._v(" "),a("th",[t._v("被叫号码")]),t._v(" "),a("th",[t._v("通话时间")]),t._v(" "),a("th",[t._v("通话时长")]),t._v(" "),a("th",[t._v("录音地址")])])]),t._v(" "),a("tbody",{staticClass:"tbody",staticStyle:{background:"#ffffff"}})]),t._v(" "),a("div",{staticClass:"box rt",attrs:{id:"box"}})])}]};var r=a("C7Lr")(s,c,!1,function(t){a("iVB3")},"data-v-96983ecc",null);e.default=r.exports},iVB3:function(t,e){}});
//# sourceMappingURL=4.300bede26002220a8272.js.map