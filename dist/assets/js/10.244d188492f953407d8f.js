webpackJsonp([10],{Hi8h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("lC5x"),l=a.n(i),s=a("J0Oq"),n=a.n(s),o=a("aA9S"),r=a.n(o),d=a("3cXf"),c=a.n(d),m=a("CtzY"),u=a.n(m),p=a("v6vg"),h=a.n(p),f={data:function(){return{value1:"",customerId:"",show:!0,detail:{},modifyhospitalDetail:{},hospitalDetail:{name:"",tel:"",nature:"",toRevisitTimeThis:"",toRevisitTime:"",dili:[],diliNow:{shenfen:{name:"",id:""},city:{name:"",id:""},qu:{name:"",id:""}}},paibanrenDetail:{customerWorkerId:"",tels:[],post:{name:"",type:""},name:{name:"",type:""}},checked:!0,radio:3,linkmanTracecontent:"",hospitalContent:"医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介,医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介医院简介",hospitalName:"大厂医院",hospitalPhone:"15077822798",options:[],telList:[],hospitalNature:[{hospitalNatureValue:1,label:"民营医院"},{hospitalNatureValue:2,label:"公立医院"}],hospitalNatureValue:"1",hospitalLabel:"民营医院",form:{name:"",tel:"",inx:""},relation:{name:""},relationTel:{tel:""},addNewTelDetail:{id:"",key:"",keys:""},dialogFormVisible:!1,dialogFormVisibleRea:!1,dialogFormVisibleReaTel:!1,formLabelWidth:"120px",linkmanList:[],traceDetailList:[],modifyThisTelValue:"",telName:0,linkmanTraceList:"",showAll:!0,linkmanTraceId:"",query:""}},activated:function(){this.query!=c()(this.$route.query)&&(r()(this.$data,this.$options.data()),this.query=c()(this.$route.query),document.title="忠安客户漏斗管理系统",this.$refs.cascader.$refs.panel.activePath=[],this.$refs.cascader.$refs.panel.calculateCheckedNodePaths(),this.options=h.a);this.customerId=this.$route.query.id,this.customer()},mounted:function(){this.options=h.a},methods:{telShowFn:function(e,t,a){console.log(e,","+t,","+a),this.$alert((e||"")+(t?","+t:"")+(a?","+a:""),"查看号码",{confirmButtonText:"确定",callback:function(e){}})},customer:function(){var e=this;return n()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$axios.get("/crm/ling-dao/customer/customer?customerId="+a.customerId).then(function(t){t.data.codeMsg?a.$message({type:"info",message:t.data.codeMsg,onClose:function(){a.$router.push({path:"/login"})}}):0===t.data.code&&(document.title="忠安客户漏斗管理系统",document.title=t.data.data.name+" - "+document.title,t.data.data.telList=[],t.data.data.dili=[t.data.data.area1Id,t.data.data.area2Id,t.data.data.area3Id],t.data.data.diliNow={shenfen:{name:t.data.data.area1Name,id:t.data.data.area1Id},city:{name:t.data.data.area2Name,id:t.data.data.area2Id},qu:{name:t.data.data.area3Name,id:t.data.data.area3Id}},t.data.data.tel1&&(t.data.data.telList.push({name:t.data.data.tel1Remark,tel:t.data.data.tel1,telName:"tel1"}),a.telName=1),t.data.data.tel2&&(t.data.data.telList.push({name:t.data.data.tel2Remark,tel:t.data.data.tel2,telName:"tel2"}),a.telName=2),t.data.data.tel3&&(t.data.data.telList.push({name:t.data.data.tel3Remark,tel:t.data.data.tel3,telName:"tel3"}),a.telName=3),t.data.data.tel4&&(t.data.data.telList.push({name:t.data.data.tel4Remark,tel:t.data.data.tel4,telName:"tel4"}),a.telName=4),t.data.data.tel5&&(t.data.data.telList.push({name:t.data.data.tel5Remark,tel:t.data.data.tel5,telName:"tel5"}),a.telName=5),t.data.data.tel6&&(t.data.data.telList.push({name:t.data.data.tel6Remark,tel:t.data.data.tel6,telName:"tel6"}),a.telName=6),t.data.data.tel7&&(t.data.data.telList.push({name:t.data.data.tel7Remark,tel:t.data.data.tel7,telName:"tel7"}),a.telName=7),t.data.data.tel8&&(t.data.data.telList.push({name:t.data.data.tel8Remark,tel:t.data.data.tel8,telName:"tel8"}),a.telName=8),t.data.data.tel9&&(t.data.data.telList.push({name:t.data.data.tel9Remark,tel:t.data.data.tel9,telName:"tel9"}),a.telName=9),t.data.data.toRevisitTime?t.data.data.toRevisitTimeThis=e.moment(t.data.data.toRevisitTime).format("YYYY-MM-DD"):t.data.data.toRevisitTimeThis="",a.hospitalDetail=t.data.data,e.customerList(),e.traceList("",1,""))});case 3:case"end":return t.stop()}},t,e)}))()},customerList:function(){var e=this;return n()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$axios.get("/crm/ling-dao/customer-worker/customer-worker-list?customerId="+e.customerId+"&sort=createTime&order=asc").then(function(e){var t="";if(e.data.codeMsg)a.$message({type:"info",message:e.data.codeMsg,onClose:function(){a.$router.push({path:"/login"})}});else if(0===e.data.code){var i=e.data.data.itemList;for(var l in i){a.hospitalDetail.paiBanCustomerWorkerId&&a.hospitalDetail.paiBanCustomerWorkerId===i[l].customerWorkerId?(i[l].paiban=1,t=l):i[l].paiban=2,i[l].name={type:0,name:i[l].name},i[l].post={type:0,name:i[l].post},1===i[l].urgent?i[l].urgentQuick=!0:i[l].urgentQuick=!1;var s=[];""===i[l].tel||null==i[l].tel||void 0===i[l].tel||s.push({telName:"tel",tel:i[l].tel,type:0}),""===i[l].tel1||null==i[l].tel1||void 0===i[l].tel1||s.push({telName:"tel1",tel:i[l].tel1,type:0}),""===i[l].tel2||null==i[l].tel2||void 0===i[l].tel2||s.push({telName:"tel2",tel:i[l].tel2,type:0}),""===i[l].tel3||null==i[l].tel3||void 0===i[l].tel3||s.push({telName:"tel3",tel:i[l].tel3,type:0}),""===i[l].tel4||null==i[l].tel4||void 0===i[l].tel4||s.push({telName:"tel4",tel:i[l].tel4,type:0}),""===i[l].tel5||null==i[l].tel5||void 0===i[l].tel5||s.push({telName:"tel5",tel:i[l].tel5,type:0}),i[l].tels=s,i[l].levelList=[{level:1,label:"暂不感兴趣"},{level:2,label:"初步感兴趣"},{level:3,label:"非常感兴趣"},{level:4,label:"近期可考察"},{level:5,label:"线上可签单"}]}e.data.data.itemList=i,""!==t&&(a.paibanrenDetail=e.data.data.itemList[t],a.paibanrenDetail.key=t,e.data.data.itemList.splice(t,1)),a.relationTel.tel="",a.linkmanList=e.data.data.itemList}});case 3:case"end":return t.stop()}},t,e)}))()},traceList:function(e,t,a){var i=this;return n()(l.a.mark(function s(){var n;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=i,a?(n.showAll=!1,n.linkmanTraceList=a,n.linkmanTraceId=e):(n.showAll=!0,n.linkmanTraceList="",n.linkmanTraceId=e),l.next=4,n.$axios.get("/crm/ling-dao/customer-worker-trace/customer-worker-trace-list?"+u.a.stringify({customerId:i.customerId,customerWorkerId:e,sort:"updateTime",order:"asc",pn:t,ps:200})).then(function(e){if(e.data.codeMsg)n.$message({type:"info",message:e.data.codeMsg,onClose:function(){n.$router.push({path:"/login"})}});else if(0===e.data.code){for(var t in e.data.data.itemList)console.log(n.moment(e.data.data.itemList[t].createTime).format("YYYY-MM-DD HH:mm:ss")),e.data.data.itemList[t].createTime=n.moment(e.data.data.itemList[t].createTime).format("YYYY-MM-DD HH:mm:ss");n.traceDetailList=e.data.data.itemList;var a=i.$refs.scrollRef;i.$nextTick().then(function(){a.scrollTop=a.scrollHeight})}});case 4:case"end":return l.stop()}},s,i)}))()},lookAllTrack:function(){this.traceList("",1,"")},sendYes:function(){var e=this;this.linkmanTraceId?this.$axios.post("/crm/ling-dao/customer-worker-trace/create-customer-worker-trace?"+u.a.stringify({content:this.linkmanTracecontent,customerWorkerId:this.linkmanTraceId})).then(function(t){t.data.codeMsg?e.$message({type:"info",message:t.data.codeMsg,onClose:function(){this.$router.push({path:"/login"})}}):0===t.data.code&&(e.linkmanTracecontent="",e.traceList(e.linkmanTraceId,1,e.linkmanTraceList))}):this.$message({type:"info",message:"请点击左边蓝色区域选择追踪目标"})},getPaiBanCustomerWorkerId:function(){var e=this;return n()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$axios.get("/crm/ling-dao/customer/customer?customerId="+a.customerId).then(function(t){t.data.codeMsg&&a.$message({type:"info",message:t.data.codeMsg,onClose:function(){a.$router.push({path:"/login"})}}),0===t.data.code&&(a.hospitalDetail.paiBanCustomerWorkerId=t.data.data.paiBanCustomerWorkerId,e.customerList(),e.traceList("",1,""))});case 3:case"end":return t.stop()}},t,e)}))()},modifyRealtion:function(e,t,a,i,l){var s=this;""===e?this.$axios.post("/crm/ling-dao/customer-worker/create-customer-worker?"+t+"&"+u.a.stringify({customerId:this.customerId})).then(function(e){e.data.codeMsg&&s.$message({type:"info",message:e.data.codeMsg}),0===e.data.code&&s.$axios.post("/crm/my-customer/update-customer?"+u.a.stringify({customerId:s.customerId,paiBanCustomerWorkerId:e.data.data.customerWorkerId})).then(function(e){e.data.codeMsg&&s.$message({type:"info",message:e.data.codeMsg}),0===e.data.code&&s.getPaiBanCustomerWorkerId()})}):this.$axios.post("/crm/ling-dao/customer-worker/update-customer-worker?"+t+"&"+u.a.stringify({customerWorkerId:e})).then(function(e){e.data.codeMsg&&s.$message({type:"info",message:e.data.codeMsg}),0===e.data.code&&(s.$message({type:"success",message:"修改成功"}),s.customerList())})},handleChange:function(e){var t=h.a.find(function(t){return t.value===e[0]}),a=t.children.find(function(t){return t.value===e[1]}),i=a.children.find(function(t){return t.value===e[2]});this.modifyhospitalDetail.area1Id=t.value,this.modifyhospitalDetail.area2Id=a.value,this.modifyhospitalDetail.area3Id=i.value,this.modifyhospitalDetail.area1Name=t.label,this.modifyhospitalDetail.area2Name=a.label,this.modifyhospitalDetail.area3Name=i.label,this.modifyhospitalDetail.dili=[t.value,a.value,i.value],this.modifyhospitalDetail.diliNow={shenfen:{name:t.label,id:t.value},city:{name:a.label,id:a.value},qu:{name:i.label,id:i.value}}},modify:function(){this.show=!this.show,this.modifyhospitalDetail=JSON.parse(c()(this.hospitalDetail)),console.dir(this.modifyhospitalDetail)},refuse:function(){this.modifyThisTelValue="",this.show=!this.show},saveIs:function(){var e=this;console.log("this.modifyhospitalDetail.tel"+this.modifyhospitalDetail.tel);var t="";for(var a in this.modifyhospitalDetail.telList)t=t+"&tel"+(parseInt(a)+1)+"="+this.modifyhospitalDetail.telList[a].tel+"&tel"+(parseInt(a)+1)+"Remark="+this.modifyhospitalDetail.telList[a].name;t=t.slice(1,t.length),this.$axios.post("/crm/ling-dao/customer/update-customer?"+t+"&"+u.a.stringify({name:this.modifyhospitalDetail.name,tel:this.modifyhospitalDetail.tel,nature:this.modifyhospitalDetail.nature,area1Id:this.modifyhospitalDetail.area1Id,area2Id:this.modifyhospitalDetail.area2Id,area3Id:this.modifyhospitalDetail.area3Id,area1Name:this.modifyhospitalDetail.area1Name,area2Name:this.modifyhospitalDetail.area2Name,area3Name:this.modifyhospitalDetail.area3Name,toRevisitTime:this.modifyhospitalDetail.toRevisitTime,brief:this.modifyhospitalDetail.brief,customerId:this.customerId})).then(function(t){t.data.codeMsg&&e.$message({type:"info",message:t.data.codeMsg}),0===t.data.code&&(e.$message({type:"success",message:"修改成功！"}),e.hospitalDetail=JSON.parse(c()(e.modifyhospitalDetail)),e.customer(),e.show=!e.show)})},zuojiTel:function(e,t){var a=this;a.$store.state.loginRefresh?(console.log(2),a.$callService.callFn(t)):(console.log(1),$.ajax({url:"/crm/login-refresh",type:"POST",async:!0,success:function(e){0==e.code&&(a.$store.state.loginRefresh=e.data,$("#login .password").val(""),a.$callService.callFn(t))}}))},selectChanged:function(e){for(var t in this.hospitalNature)e===this.hospitalNature[t].hospitalNatureValue&&(this.hospitalDetail.nature=this.hospitalNature[t].hospitalNatureValue)},makerefuseAdd:function(){this.form.name="",this.form.tel="",this.telName=this.hospitalDetail.telList.length,this.modifyThisTelValue="",this.dialogFormVisible=!1},makesureAdd:function(){if(console.log(this.form.name+"---"+this.form.tel),""===this.form.name||""===this.form.tel)this.$message({type:"info",message:"请填写电话号码和备注",onClose:function(){}});else{if(this.form.state)return this.modifyhospitalDetail.telList[--this.form.state]={name:this.form.name,tel:this.form.tel},this.dialogFormVisible=!1,"";this.modifyhospitalDetail.telList.push({name:this.form.name,tel:this.form.tel}),this.dialogFormVisible=!1}},addThisTel:function(e){if(this.modifyhospitalDetail.telList.length>8)return this.$message({type:"info",message:"当前最多添加9个备用电话"}),"";this.dialogFormVisible=!0,this.form.tel="",this.form.name="",this.form.state=""},modifyThisTel:function(e,t){console.log(t),++t&&(this.form.state=t),this.dialogFormVisible=!0,this.form.tel=e.tel,this.form.name=e.name},urgentQuick:function(e,t){!1===t?this.modifyRealtion(e,"urgent=0","","",""):this.modifyRealtion(e,"urgent=1","","","")},levelList:function(e,t){this.modifyRealtion(e,"level="+(t||""),"","","")},dblName:function(e,t,a){"key"===a?this.paibanrenDetail.name.type=1:this.linkmanList[a].name.type=1},dblNameEnd:function(e,t,a){"key"===a?(this.modifyRealtion(e,"name="+(t||""),a,"name",""),this.paibanrenDetail.name.type=0):(this.modifyRealtion(e,"name="+(t||""),a,"name",""),this.linkmanList[a].name.type=0)},dblPost:function(e,t,a){"key"===a?this.paibanrenDetail.post.type=1:this.linkmanList[a].post.type=1},dblPostEnd:function(e,t,a){"key"===a?(this.modifyRealtion(e,"post="+(t||""),a,"post",""),this.paibanrenDetail.post.type=0):(this.modifyRealtion(e,"post="+(t||""),a,"post",""),this.linkmanList[a].post.type=0)},dblTel:function(e,t,a,i,l,s){console.log(s.currentTarget),console.log(s.target),"key"===a?this.paibanrenDetail.tels[i].type=1:this.linkmanList[a].tels[i].type=1},dblTelEnd:function(e,t,a,i,l,s){if(1===l.length&&0===i)this.modifyRealtion(e,"tel="+(t||""),a,"tel",i);else{var n="";for(var o in l[i].tel=t,l[i].telName="tel"+i,l[i].type=1,console.log(l.length),l)n=n+"&tel"+o+"="+l[o].tel;1==l.length&&(n+="&tel1=&tel=&tel3=&tel4=&tel5="),2==l.length&&(n+="&tel=&tel3=&tel4=&tel5="),3==l.length&&(n+="&tel3=&tel4=&tel5="),4==l.length&&(n+="&tel4=&tel5="),5==l.length&&(n+="&tel5="),(n=n.slice(1,n.length))&&0==n.slice(3,4)&&(n="tel"+n.split("tel0")[1]),this.modifyRealtion(e,n,a,"tel",i)}},addPhoneTel:function(e,t,a){6===t.length?this.$message({type:"info",message:"你好,当前最高添加6个号码"}):(this.dialogFormVisibleReaTel=!0,this.addNewTelDetail.id=e,this.addNewTelDetail.key=a,this.addNewTelDetail.keys=t)},addRealtionSureTel:function(){var e=this,t="";if(this.relationTel.tel){if(0===this.addNewTelDetail.keys.length)t="tel="+(this.relationTel.tel||"");else{for(var a in this.addNewTelDetail.keys.push({tel:this.relationTel.tel||"",telName:"tel"+[this.addNewTelDetail.keys.length],type:0}),this.addNewTelDetail.keys)t=0===a?t+"tel="+(this.addNewTelDetail.keys[a].tel||""):t+"&tel"+(a||"")+"="+(this.addNewTelDetail.keys[a].tel||"");t.split("tel0")&&(t="tel"+t.split("tel0")[1])}this.addNewTelDetail.id?this.$axios.post("/crm/ling-dao/customer-worker/update-customer-worker?"+t+"&"+u.a.stringify({customerWorkerId:this.addNewTelDetail.id})).then(function(t){t.data.codeMsg&&e.$message({type:"info",message:t.data.codeMsg}),0===t.data.code&&(e.$message({type:"success",message:"修改成功"}),e.customerList(),e.dialogFormVisibleReaTel=!1)}):this.$message({type:"info",message:"请先填写拍板人或相关人姓名"})}else this.$message({type:"info",message:"请填写号码"})},addNewRelation:function(){this.dialogFormVisibleRea=!0},addRealtionSure:function(){var e=this;e.relation.name?e.$axios.post("/crm/ling-dao/customer-worker/create-customer-worker?name="+e.relation.name+"&customerId="+this.customerId).then(function(t){t.data.codeMsg?e.$message({type:"info",message:t.data.codeMsg,onClose:function(){e.$router.push({path:"/login"})}}):0===t.data.code&&(e.dialogFormVisibleRea=!1,e.linkmanList.push({name:{name:e.relation.name,type:0},post:{name:"",type:0},level:""}),e.relation.name="",e.customerList())}):this.$message({type:"info",message:"请填写相关人姓名"})}}},v={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"addIndex"}},[i("div",{staticClass:"addIndexBox"},[i("div",[i("div",{staticClass:"addIndexBoxTitle"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"modify",attrs:{type:"primary"},on:{click:function(t){return e.modify()}}},[e._v("修改")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"saveIs",attrs:{type:"primary"},on:{click:function(t){return e.saveIs()}}},[e._v("保存")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"refuse",attrs:{plain:""},on:{click:function(t){return e.refuse()}}},[e._v("取消")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[i("div",{staticClass:"addmainBox"},[i("div",{staticClass:"detailLine"},[i("div",[i("span",[e._v("医院名：")]),e._v(" "),i("span",[e._v(e._s(e.hospitalDetail.name))])]),e._v(" "),i("div",[i("span",[e._v("电话：")]),e._v(" "),i("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.hospitalDetail.tel))])])]),e._v(" "),i("div",{staticClass:"detailLine"},[i("div",{staticStyle:{"margin-right":"0px"}},[i("span",{staticStyle:{float:"left",width:"80px"}},[e._v("其他号码：")]),e._v(" "),i("div",{staticStyle:{width:"850px",float:"left"}},e._l(e.hospitalDetail.telList,function(t,a){return i("p",{key:a,staticStyle:{width:"385px"}},[i("span",[e._v(e._s(t.name)+"：")]),e._v(" "),i("span",[e._v(e._s(t.tel))])])}),0)])]),e._v(" "),i("div",{staticClass:" detailLine"},[i("div",{staticClass:"toRevisitTime"},[i("span",[e._v("回访时间：")]),e._v(" "),i("span",[e._v(e._s(e.hospitalDetail.toRevisitTimeThis))])])]),e._v(" "),i("div",{staticClass:"detailLine"},[i("div",[i("span",[e._v("地址：")]),e._v(" "),i("span",[i("span",[e._v(e._s(e.hospitalDetail.diliNow.shenfen.name?e.hospitalDetail.diliNow.shenfen.name+"-":""))]),e._v(" "),i("span",[e._v(e._s(e.hospitalDetail.diliNow.city.name?e.hospitalDetail.diliNow.city.name+"-":""))]),e._v(" "),i("span",[e._v(e._s(e.hospitalDetail.diliNow.qu.name))])])]),e._v(" "),i("div",[i("span",[e._v("性质：")]),e._v(" "),i("span",[e._v(e._s(1==e.hospitalDetail.nature?"民营医院":"公立医院"))])])])]),e._v(" "),i("div",{staticClass:"addContent"},[i("div",[i("span",[e._v("简介：")]),e._v(" "),i("el-input",{attrs:{disabled:"",resize:"none",autosize:{minRows:6,maxRows:6},type:"textarea",rows:2,placeholder:"暂时禁用编辑医院简介"},model:{value:e.hospitalDetail.brief,callback:function(t){e.$set(e.hospitalDetail,"brief",t)},expression:"hospitalDetail.brief"}})],1)])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}]},[i("div",{staticClass:"addmainBox"},[i("div",{staticClass:"detailLine detailLineModify"},[i("div",[i("span",[e._v("医院名：")]),e._v(" "),i("el-input",{staticClass:"hospitalName",attrs:{type:"text",placeholder:"请输入"},model:{value:e.modifyhospitalDetail.name,callback:function(t){e.$set(e.modifyhospitalDetail,"name",t)},expression:"modifyhospitalDetail.name"}})],1),e._v(" "),i("div",[i("span",[e._v("电话：")]),e._v(" "),i("el-input",{staticClass:"hospitalPhone",attrs:{type:"text",maxlength:"20",placeholder:"请输入"},on:{input:function(t){e.modifyhospitalDetail.tel=e.modifyhospitalDetail.tel.replace(/[^\d\-\d]/g,"")}},model:{value:e.modifyhospitalDetail.tel,callback:function(t){e.$set(e.modifyhospitalDetail,"tel",t)},expression:"modifyhospitalDetail.tel "}})],1)]),e._v(" "),i("div",{staticClass:"detailLine detailLineModify"},[i("div",{staticStyle:{"margin-right":"0px"}},[i("span",{staticStyle:{float:"left",width:"80px"}},[e._v("其他号码：")]),e._v(" "),i("div",{staticStyle:{width:"850px",float:"left"}},[e._l(e.modifyhospitalDetail.telList,function(t,a){return i("p",{key:a,staticClass:"modifyTel",staticStyle:{width:"350px"},on:{click:function(i){return e.modifyThisTel(t,a)}}},[i("span",[e._v(e._s(t.name)+"：")]),i("span",[e._v(e._s(t.tel))])])}),e._v(" "),i("div",{staticClass:"addHospitalTel",on:{click:function(t){return e.addThisTel()}}},[i("img",{attrs:{src:a("TFRd"),alt:""}}),i("span",[e._v("添加电话")])])],2)])]),e._v(" "),i("div",{staticClass:" detailLine detailLineModify"},[i("div",{staticClass:"toRevisitTime"},[i("span",[e._v("回访时间：")]),e._v(" "),i("el-date-picker",{attrs:{type:"date",placeholder:"",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.modifyhospitalDetail.toRevisitTime,callback:function(t){e.$set(e.modifyhospitalDetail,"toRevisitTime",t)},expression:"modifyhospitalDetail.toRevisitTime"}})],1)]),e._v(" "),i("div",{staticClass:"detailLine detailLineModify"},[i("div",[i("span",[e._v("地址：")]),e._v(" "),i("el-cascader",{ref:"cascader",staticClass:"hospitalAddress",attrs:{options:e.options,clearable:""},on:{change:e.handleChange},model:{value:e.modifyhospitalDetail.dili,callback:function(t){e.$set(e.modifyhospitalDetail,"dili",t)},expression:"modifyhospitalDetail.dili"}})],1),e._v(" "),i("div",[i("span",[e._v("性质：")]),e._v(" "),i("el-select",{staticClass:"hospitalNature",attrs:{placeholder:"请选择"},on:{change:e.selectChanged},model:{value:e.modifyhospitalDetail.nature,callback:function(t){e.$set(e.modifyhospitalDetail,"nature",t)},expression:"modifyhospitalDetail.nature"}},e._l(e.hospitalNature,function(e){return i("el-option",{key:e.hospitalNatureValue,attrs:{label:e.label,value:e.hospitalNatureValue}})}),1)],1)])]),e._v(" "),i("div",{staticClass:"addContent"},[i("div",[i("span",[e._v("简介：")]),e._v(" "),i("el-input",{attrs:{disabled:"",resize:"none",autosize:{minRows:6,maxRows:6},type:"textarea",rows:2,placeholder:"暂时禁用编辑医院简介"},model:{value:e.modifyhospitalDetail.brief,callback:function(t){e.$set(e.modifyhospitalDetail,"brief",t)},expression:"modifyhospitalDetail.brief"}})],1)])])])]),e._v(" "),i("div",{staticStyle:{background:"#f0f2f5"}},[i("div",{staticClass:"detailBottom"},[i("div",{staticClass:"detailBottomlf"},[i("div",{staticClass:"linkmanBox"},[i("div",{staticClass:"linkmanBoxTitle",on:{click:function(t){return e.traceList(e.paibanrenDetail.customerWorkerId,1,e.paibanrenDetail.name.name)}}},[i("span",[e._v("拍板人")])]),e._v(" "),i("div",{staticClass:"linkmanBoxRt"},[i("div",{staticClass:"linkmanBoxRtLine"},[i("p",{on:{click:function(t){return e.dblName(e.paibanrenDetail.customerWorkerId,e.paibanrenDetail.name.name,"key",t)}}},[i("span",{staticClass:"linkmanTitle"},[e._v("姓名：")]),e._v(" "),i("el-input",{staticClass:"withBox",attrs:{type:"text",placeholder:"单击填写姓名",maxlength:"20"},on:{blur:function(t){return e.dblNameEnd(e.paibanrenDetail.customerWorkerId,e.paibanrenDetail.name.name,"key",t)}},model:{value:e.paibanrenDetail.name.name,callback:function(t){e.$set(e.paibanrenDetail.name,"name",t)},expression:"paibanrenDetail.name.name"}})],1),e._v(" "),i("div",{staticClass:"ifQuick"},[i("el-checkbox",{staticStyle:{"margin-right":"10px"},on:{change:function(t){return e.urgentQuick(e.paibanrenDetail.customerWorkerId,e.paibanrenDetail.urgentQuick)}},model:{value:e.paibanrenDetail.urgentQuick,callback:function(t){e.$set(e.paibanrenDetail,"urgentQuick",t)},expression:"paibanrenDetail.urgentQuick"}},[e._v("加急")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.levelList(e.paibanrenDetail.customerWorkerId,e.paibanrenDetail.level)}},model:{value:e.paibanrenDetail.level,callback:function(t){e.$set(e.paibanrenDetail,"level",t)},expression:"paibanrenDetail.level"}},e._l(e.paibanrenDetail.levelList,function(e){return i("el-option",{key:e.level,attrs:{label:e.label,value:e.level}})}),1)],1)]),e._v(" "),i("div",{staticClass:"linkmanBoxRtLine"},[i("p",{on:{click:function(t){return e.dblPost(e.paibanrenDetail.customerWorkerId,e.paibanrenDetail.post.name,"key",t)}}},[i("span",{staticClass:"linkmanTitle"},[e._v("职务：")]),e._v(" "),i("el-input",{staticClass:"withBox",attrs:{placeholder:"单击填写职务",type:"text",maxlength:"20"},on:{blur:function(t){return e.dblPostEnd(e.paibanrenDetail.customerWorkerId,e.paibanrenDetail.post.name,"key",t)}},model:{value:e.paibanrenDetail.post.name,callback:function(t){e.$set(e.paibanrenDetail.post,"name",t)},expression:"paibanrenDetail.post.name"}})],1),e._v(" "),i("div",[i("span",{staticStyle:{float:"left","margin-right":"3px"}},[e._v("历史号码: ")]),e._v(" "),i("p",{staticStyle:{float:"none",cursor:"pointer",width:"300px",display:"-webkit-box","-webkit-line-clamp":"1","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all","word-wrap":"break-word"},on:{click:function(t){return e.telShowFn(e.paibanrenDetail.phone1,e.paibanrenDetail.phone2,e.paibanrenDetail.phone3)}}},[e._v("\n                  "+e._s((e.paibanrenDetail.phone1?e.paibanrenDetail.phone1:"")+(e.paibanrenDetail.phone2?","+e.paibanrenDetail.phone2:"")+(e.paibanrenDetail.phone3?","+e.paibanrenDetail.phone3:""))+"\n                ")])])]),e._v(" "),i("div",{staticClass:"linkmanBoxRtLine"},[e._l(e.paibanrenDetail.tels,function(t,a){return i("div",{key:a,staticClass:"telinput"},[i("span",{staticClass:"linkmanTitle"},[e._v("电话：")]),e._v(" "),i("p",{staticClass:"withBox",on:{click:function(i){return e.dblTel(e.paibanrenDetail.customerWorkerId,t.tel,"key",a,e.paibanrenDetail.tels,i)}}},[i("el-input",{attrs:{placeholder:"单击输入电话",type:"text",maxlength:"20",autocomplete:"off"},on:{blur:function(i){return e.dblTelEnd(e.paibanrenDetail.customerWorkerId,t.tel,"key",a,e.paibanrenDetail.tels,i)},input:function(e){t.tel=t.tel.replace(/[^\d\-\d]/g,"")}},model:{value:t.tel,callback:function(a){e.$set(t,"tel",a)},expression:"itemed.tel"}})],1)])}),e._v(" "),i("div",{staticClass:"addPhoneTel",on:{click:function(t){return e.addPhoneTel(e.paibanrenDetail.customerWorkerId,e.paibanrenDetail.tels,"key")}}},[i("img",{attrs:{src:a("TFRd"),alt:""}}),i("span",[e._v("添加电话")])])],2)])]),e._v(" "),e._l(e.linkmanList,function(t,l){return i("div",{key:l,staticClass:"linkmanBox"},[i("div",{staticClass:"linkmanBoxTitle",on:{click:function(a){return e.traceList(t.customerWorkerId,1,t.name.name)}}},[i("span",[e._v("相关人")])]),e._v(" "),i("div",{staticClass:"linkmanBoxRt"},[i("div",{staticClass:"linkmanBoxRtLine"},[i("p",{on:{click:function(a){return e.dblName(t.customerWorkerId,t.name.name,l,a)}}},[i("span",{staticClass:"linkmanTitle"},[e._v("姓名：")]),e._v(" "),i("el-input",{staticClass:"withBox",attrs:{type:"text",placeholder:"单击填写姓名",maxlength:"20"},on:{blur:function(a){return e.dblNameEnd(t.customerWorkerId,t.name.name,l,a)}},model:{value:t.name.name,callback:function(a){e.$set(t.name,"name",a)},expression:"item.name.name"}})],1),e._v(" "),i("div",{staticClass:"ifQuick"},[i("el-checkbox",{staticStyle:{"margin-right":"10px"},on:{change:function(a){return e.urgentQuick(t.customerWorkerId,t.urgentQuick)}},model:{value:t.urgentQuick,callback:function(a){e.$set(t,"urgentQuick",a)},expression:"item.urgentQuick"}},[e._v("加急")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.levelList(t.customerWorkerId,t.level)}},model:{value:t.level,callback:function(a){e.$set(t,"level",a)},expression:"item.level"}},e._l(t.levelList,function(e){return i("el-option",{key:e.level,attrs:{label:e.label,value:e.level}})}),1)],1)]),e._v(" "),i("div",{staticClass:"linkmanBoxRtLine"},[i("p",{on:{click:function(a){return e.dblPost(t.customerWorkerId,t.post.name,l,a)}}},[i("span",{staticClass:"linkmanTitle"},[e._v("职务：")]),e._v(" "),i("el-input",{staticClass:"withBox",attrs:{placeholder:"单击填写职务",type:"text",maxlength:"20"},on:{blur:function(a){return e.dblPostEnd(t.customerWorkerId,t.post.name,l,a)}},model:{value:t.post.name,callback:function(a){e.$set(t.post,"name",a)},expression:"item.post.name"}})],1),e._v(" "),i("div",[i("span",{staticStyle:{float:"left","margin-right":"3px"}},[e._v("历史号码: ")]),e._v(" "),i("p",{staticStyle:{float:"none",cursor:"pointer",width:"300px",display:"-webkit-box","-webkit-line-clamp":"1","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all","word-wrap":"break-word"},on:{click:function(a){return e.telShowFn(t.phone1,t.phone2,t.phone3)}}},[e._v("\n                  "+e._s((t.phone1?t.phone1:"")+(t.phone2?","+t.phone2:"")+(t.phone3?","+t.phone3:""))+"\n                ")])])]),e._v(" "),i("div",{staticClass:"linkmanBoxRtLine"},[e._l(t.tels,function(a,s){return i("div",{key:s,staticClass:"telinput"},[i("span",{staticClass:"linkmanTitle"},[e._v("电话：")]),e._v(" "),i("p",{staticClass:"withBox ",on:{click:function(i){return e.dblTel(t.customerWorkerId,a.tel,l,s,t.tels,i)}}},[i("el-input",{attrs:{placeholder:"单击输入电话",type:"text",maxlength:"20",autocomplete:"off"},on:{blur:function(i){return e.dblTelEnd(t.customerWorkerId,a.tel,l,s,t.tels,i)},input:function(e){a.tel=a.tel.replace(/[^\d\-\d]/g,"")}},model:{value:a.tel,callback:function(t){e.$set(a,"tel",t)},expression:"itemed.tel"}})],1)])}),e._v(" "),i("div",{staticClass:"addPhoneTel",on:{click:function(a){return e.addPhoneTel(t.customerWorkerId,t.tels,l)}}},[i("img",{attrs:{src:a("TFRd"),alt:""}}),i("span",[e._v("添加电话")])])],2)])])}),e._v(" "),i("p",{staticClass:"addNewRelation",on:{click:e.addNewRelation}},[e._v("添加新的关系人")])],2),e._v(" "),i("div",{staticClass:"detailBottomrt"},[i("div",{staticClass:"trackAllDetail"},[i("div",{staticClass:"trackTop"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.showAll,expression:"!showAll"}],staticClass:"lookAllTrack",attrs:{type:"primary"},on:{click:e.lookAllTrack}},[e._v("查看全部")]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.showAll,expression:"showAll"}],staticStyle:{width:"100%"}},[e._v(e._s(e.hospitalDetail.name)+"的跟踪记录")]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!e.showAll,expression:"!showAll"}]},[e._v(e._s(e.linkmanTraceList)+"的跟踪记录")])],1),e._v(" "),i("div",{ref:"scrollRef",staticClass:"trackMid"},e._l(e.traceDetailList,function(t,a){return i("div",{key:a,staticClass:"trackMidEve"},[i("p",[i("span",[e._v(e._s(t.createTime))]),i("span",[e._v(e._s(t.customerWorkerName))])]),e._v(" "),i("p",[e._v(e._s(t.content))])])}),0),e._v(" "),i("div",{staticClass:"trackBottom"},[i("div",{staticClass:"trackBottomTwo"},[i("el-input",{staticClass:"trackText",attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"请输入",resize:"none"},model:{value:e.linkmanTracecontent,callback:function(t){e.linkmanTracecontent=t},expression:"linkmanTracecontent"}}),e._v(" "),i("el-button",{staticClass:"sendYes",on:{click:e.sendYes}},[e._v("发送")])],1)])])])]),e._v(" "),i("div",{staticStyle:{clear:"both",width:"100%",height:"10px"}})]),e._v(" "),i("el-dialog",{attrs:{title:"新增/修改号码",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.form}},[i("el-form-item",{attrs:{label:"名称备注:","label-width":e.formLabelWidth}},[i("el-input",{attrs:{maxlength:"10",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话号码:","label-width":e.formLabelWidth}},[i("el-input",{attrs:{type:"text",maxlength:"15",autocomplete:"off"},on:{input:function(t){e.form.tel=e.form.tel.replace(/[^\d\-\d]/g,"")}},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.makerefuseAdd}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.makesureAdd}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"新增相关人",visible:e.dialogFormVisibleRea},on:{"update:visible":function(t){e.dialogFormVisibleRea=t}}},[i("el-form",{attrs:{model:e.relation}},[i("el-form-item",{attrs:{label:"相关人姓名","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.relation.name,callback:function(t){e.$set(e.relation,"name",t)},expression:"relation.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisibleRea=!1,e.relation.name=""}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addRealtionSure}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"新增相关人号码",visible:e.dialogFormVisibleReaTel},on:{"update:visible":function(t){e.dialogFormVisibleReaTel=t}}},[i("el-form",{attrs:{model:e.relationTel}},[i("el-form-item",{attrs:{label:"号码","label-width":e.formLabelWidth}},[i("el-input",{attrs:{type:"text",maxlength:"20",autocomplete:"off"},on:{input:function(t){e.relationTel.tel=e.relationTel.tel.replace(/[^\d\-\d]/g,"")}},model:{value:e.relationTel.tel,callback:function(t){e.$set(e.relationTel,"tel",t)},expression:"relationTel.tel"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisibleReaTel=!1,e.relationTel.tel=""}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addRealtionSureTel}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(f,v,!1,function(e){a("j3xE")},"data-v-b87a07d0",null);t.default=g.exports},TFRd:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNjMuMSAoOTI0NTIpIC0gaHR0cHM6Ly9za2V0Y2guY29tIC0tPg0KICAgIDx0aXRsZT7liqAgY29weTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSLmoIflh4bliJfooagtY29weS055aSH5Lu9LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMjYuMDAwMDAwLCAtMzgxLjAwMDAwMCkiIGZpbGw9IiMxODkwRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+DQogICAgICAgICAgICA8ZyBpZD0i5YqgLWNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyNi4wMDAwMDAsIDM4MS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOCwxNi4wMDAwMTg2IEMzLjU4MTcyMjkyLDE2LjAwMDAxODYgMCwxMi40MTgyOTU3IDAsOCBDMCwzLjU4MTcyMjkyIDMuNTgxNzIyOTIsMCA4LDAgQzEyLjQxODI5NTcsMCAxNi4wMDAwMTg2LDMuNTgxNzIyOTIgMTYuMDAwMDE4Niw4IEMxNi4wMDAwMTg2LDEyLjQxODI5NTcgMTIuNDE4Mjk1NywxNi4wMDAwMTg2IDgsMTYuMDAwMDE4NiBaIE03LjE0Mjg2NjEyLDcuMjg1NzI3MjMgTDMuNzE0Mjg0MDEsNy4yODU3MjcyMyBMMy43MTQyODM5Nyw3LjI4NTcyNzIzIEMzLjI0MDg5NTkyLDcuMjg1NzI3MjUgMi44NTcxNDA3OSw3LjY2OTQ4MzkyIDIuODU3MTQwNzksOC4xNDI4NzA0MSBDMi44NTcxNDA3OSw4LjYxNjI1ODQ2IDMuMjQwODk3NDgsOS4wMDAwMTM2IDMuNzE0MjgzOTcsOS4wMDAwMTM2IEw3LjE0Mjg2NjA5LDkuMDAwMDEzNiBMNy4xNDI4NjYwOSwxMi4yODU3MzYyIEw3LjE0Mjg2NjA5LDEyLjI4NTczNjMgQzcuMTQyODY2MTYsMTIuNzU5MTI0MyA3LjUyNjYyMjc4LDEzLjE0Mjg3OTUgOC4wMDAwMTA4MywxMy4xNDI4Nzk1IEM4LjQ3MzM5ODg4LDEzLjE0Mjg3OTUgOC44NTcxNTQwMiwxMi43NTkxMjI4IDguODU3MTU0MDIsMTIuMjg1NzM2MyBMOC44NTcxNTQwMiw5LjAwMDAxMzcgTDEyLjI4NTczNjEsOS4wMDAwMTM3IEwxMi4yODU3MzYxLDkuMDAwMDEzNyBDMTIuNzU5MTI0MSw5LjAwMDAxMzcyIDEzLjE0Mjg3OTMsOC42MTYyNTcwMSAxMy4xNDI4NzkzLDguMTQyODcwNTIgQzEzLjE0Mjg3OTMsNy42Njk0ODI0NyAxMi43NTkxMjI2LDcuMjg1NzI3MzMgMTIuMjg1NzM2MSw3LjI4NTcyNzMzIEw4Ljg1NzE1Mzk4LDcuMjg1NzI3MzMgTDguODU3MTUzOTgsMy43MTQzMDEzIEw4Ljg1NzE1Mzk4LDMuNzE0MzAxMyBDOC44NTcxNTM5OCwzLjI0MDkxMzI1IDguNDczMzk3MjksMi44NTcxNTgxMiA4LjAwMDAxMDgsMi44NTcxNTgxMiBDNy41MjY2MjI3NSwyLjg1NzE1ODEyIDcuMTQyODY3NjEsMy4yNDA5MTQ4MSA3LjE0Mjg2NzYxLDMuNzE0MzAxMyBMNy4xNDI4Njc2MSw3LjI4NTcyNzMzIEw3LjE0Mjg2NjEyLDcuMjg1NzI3MjMgWiIgaWQ9IuW9oueKtiI+PC9wYXRoPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},j3xE:function(e,t){}});
//# sourceMappingURL=10.244d188492f953407d8f.js.map